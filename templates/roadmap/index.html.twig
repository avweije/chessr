{% extends "./base.html.twig" %}

{% block body %}
	<div class="is-flex is-justify-content-space-around p-4">
		<div id="roadmapTypeButtons" data-element="yes" class="boxed-radio-menu">
			<div class="boxed-radio">
				<input class="is-hidden" type="radio" name="roadmap_type" value="white" id="roadmapWhite" data-element="yes" checked/>
				<label class="boxed-radio-label peer-checked:border-blue-300 peer-checked:bg-blue-100" for="roadmapWhite"></label>
				<span class="boxed-radio-text">White</span>
			</div>
			<div class="boxed-radio">
				<input class="is-hidden" type="radio" name="roadmap_type" value="black" id="roadmapBlack" data-element="yes"/>
				<label class="boxed-radio-label peer-checked:border-blue-300 peer-checked:bg-blue-100" for="roadmapBlack"></label>
				<span class="boxed-radio-text">Black</span>
			</div>
		</div>
	</div>

	<div id="roadmapIntro" data-element="yes" class="is-flex is-justify-content-space-around mt-6">
		<div class="is-flex is-flex-direction-column is-align-items-center">
			<p id="roadmapIntroText" data-element="yes" class="is-size-5">
				Click on a move to browse through your opening repertoire.
			</p>
		</div>
	</div>

	<div id="roadmapTreeCurrent" data-element="yes" class="is-hidden is-flex is-justify-content-center mt-2 px-4">
		<div class="is-flex is-justify-content-center">
			<div class="is-flex w-full is-justify-content-center overflow-is-hidden">
				<div class="is-flex is-align-items-center whitespace-nowrap overflow-is-hidden px-3">
					<span id="roadmapTreeCurrentField" data-element="yes" class="text-lg has-text-weight-medium is-ellipsis"></span>
				</div>
				<!--<div id="roadmapTreeCurrentButtons" class="is-flex is-align-items-center pr-3"></div>-->
			</div>
		</div>
	</div>

	<div id="roadmapTreePath" data-element="yes" class="is-flex is-flex-wrap-wrap is-gap-1 is-justify-content-center mt-4"></div>

	<div id="roadmapTreeMissingMoves" data-element="yes" class="is-hidden is-flex is-justify-content-space-around mt-4">
		<div class="box grid grid-4auto is-hoverable p-3 is-rounded"></div>
	</div>

	<div id="roadmapTreeContainer" data-element="yes" class="is-flex is-flex-direction-column gap-y-2 is-align-items-center mt-5">
		<div class="is-flex is-flex-wrap-wrap is-justify-content-center is-gap-2">
			<div class="skeleton-block skeleton-roadmap-tree-item"></div>
			<div class="skeleton-block skeleton-roadmap-tree-item"></div>
			<div class="skeleton-block skeleton-roadmap-tree-item"></div>
			<div class="skeleton-block skeleton-roadmap-tree-item"></div>
		</div>
	</div>

	<div id="roadmapDetails" data-element="yes" class="is-hidden is-flex is-justify-content-space-around mt-5">
		<div class="is-flex is-flex-direction-column is-align-items-center">
			<div class="is-flex text-md p-4">
				<div>
					<span class="has-text-weight-bold has-text-faded">ECO:</span>
					<span id="roadmapDetailsEco" data-element="yes"></span>
				</div>
				<div class="mx-5">
					<span class="has-text-weight-bold has-text-faded">PGN:</span>
					<span id="roadmapDetailsPgn" data-element="yes"></span>
				</div>
				<div>
					<span class="has-text-weight-bold has-text-faded">Accuracy:</span>
					<span id="roadmapDetailsAccuracy" data-element="yes"></span>
				</div>
			</div>

			<div class="text-md p-4 has-text-faded">
				<a id="openInRepertoireLink" data-element="yes" href="#">Open in your repertoire</a>
				<span class="mx-1">|</span>
				<a id="openInPracticeLink" data-element="yes" href="#">Use in practice run</a>
			</div>
		</div>
	</div>

	<div class="is-fixed bottom-0 left-0 right-0 is-flex is-justify-content-center mx-6 mb-2 text-sm">
		<div class="is-flex is-justify-content-space-around overflow-is-hidden rounded bg-white">
			<div class="is-flex is-align-items-center whitespace-nowrap overflow-is-hidden px-2 py-2">
				<span class="has-text-faded">
					<i class="fa-solid fa-crosshairs"></i>
				</span>
				<span class="is-size-7 has-text-faded ml-2 mr-1 is-ellipsis">Accuracy</span>
			</div>
			<div class="is-flex is-align-items-center whitespace-nowrap overflow-is-hidden px-2 py-2">
				<span class="has-text-faded">
					<i class="fa-solid fa-arrow-trend-down"></i>
				</span>
				<span class="is-size-7 has-text-faded ml-2 mr-1 is-ellipsis">Lowest Accuracy Variation</span>
			</div>
			<div class="is-flex is-align-items-center whitespace-nowrap overflow-is-hidden px-2 py-2">
				<span class="has-text-faded">
					<i class="fa-solid fa-medal"></i>
				</span>
				<span class="is-size-7 has-text-faded ml-2 mr-1 is-ellipsis">Missing Top Responses</span>
			</div>
			<div class="is-flex is-align-items-center whitespace-nowrap overflow-is-hidden px-2 py-2">
				<span class="has-text-faded">
					<i class="fa-solid fa-arrow-turn-down"></i>
				</span>
				<span class="is-size-7 has-text-faded ml-2 mr-1 is-ellipsis">Last Variation in Line</span>
			</div>
		</div>
	</div>

	<form id="roadmapForm" data-element="yes" method="POST" action="{{ path('roadmap') }}" target="_blank">
		<input id="roadmapIdInput" data-element="yes" type="hidden" name="id" value=""/>
		<input id="roadmapColorInput" data-element="yes" type="hidden" name="color" value=""/>
		<input id="roadmapPgnInput" data-element="yes" type="hidden" name="pgn" value=""/>
		<input id="roadmapFenInput" data-element="yes" type="hidden" name="fen" value=""/>
	</form>
{% endblock %}
{% block stylesheets %}
	{{ parent() }}

	<link rel="stylesheet" href="{{ asset('styles/roadmap.css') }}">
{% endblock %}
{% block javascripts %}
	{{ parent() }}

	<script type="module" src="{{ asset('js/roadmap.js') }}"></script>
{% endblock %}
